<button id="toggleButton" onclick="toggleFunction()">
  {% if configuration.stream_running == 'running' %}■{% else %}▶{% endif %}
</button>

<script>
  async function toggleFunction() {
    const button = document.getElementById('toggleButton');
    const isRunning = button.innerHTML.trim() === '■';

    if (!isRunning) {
      button.innerHTML = '■';
      const response = await fetch('/start_streaming', { method: 'POST' });
      if (response.ok) {
        console.log('Streaming started');
        button.innerHTML = '■';
      } else {
        console.error('Failed to start streaming');
      }
    } else {
      button.innerHTML = '▶';
      const response = await fetch('/stop_streaming', { method: 'POST' });
      if (response.ok) {
        console.log('Streaming stopped');
        button.innerHTML = '▶';
      } else {
        console.error('Failed to stop streaming');
      }
    }
  }
</script>
